---
title: 'Linux使用总结'
date: 2022-02-24
permalink: /posts/2022/02/blog-post-1/
tags:
  - linux
---

Linux使用总结。

# df和du命令

**df检查磁盘空间占用情况(并不能查看某个目录占用的磁盘大小)。**

命令格式：

df [option]

-h 以容易理解的格式(给人看的格式)输出文件系统分区使用情况，例如 10kB、10MB、10GB 等。
-k 以 kB 为单位输出文件系统分区使用情况。
-m 以 mB 为单位输出文件系统分区使用情况。
-a 列出所有的文件系统分区，包含大小为 0 的文件系统分区。
-i 列出文件系统分区的 inodes 信息。
-T 显示磁盘分区的文件系统类型。

**du显示文件或目录所占的磁盘空间。**

命令格式：

du [option] 文件/目录

-h 以容易理解的格式(给人看的格式)输出文件系统分区使用情况，例如 10kB、10MB、10GB 等。
-s 显示文件或整个目录的大小，默认单位为 kB。


# ssh时在后台执行训练任务

在前台执行训练任务，如果当前终端断开连接，执行的任务就会被终止。将任务放在后台执行是个不错的策略。

nohup(no hang up)，不挂断执行任务。

例如：
```bash
nohup python train.py 2>&1 &
```
上述指令会将原先打印到屏幕上的内容打印到`nohup.out`文件中。

如果想改变此文件名，执行
```bash
nohup python train.py>hup.out 2>&1 &
```

其中，`2>&1`中`2`在Linux中代表错误信息，`1`代表标准输出，`2>&1`代表将错误信息和标准信息一同输出到标准信息的通道上，即`nohup.out`文件。命令最后的`&`代表在后台执行。

使用`jobs -l`查看后台运行的命令，`jobs`只能查看当前终端开启的命令，使用新终端查看之前运行的命令时，需要使用
```bash
ps -aux | grep train.py
```
查看。

使用
```bash
kill -9 pid号
```
终止命令的执行。

# ncdu,linux上类似Windows上treesize，分析磁盘使用的软件
```bash
sudo apt install ncdu
```

# 查看网速

```bash
sudo apt install nethogs
nethogs -d 2 #设置更新间隔
```
# terminal使用全局代理

一般是用于conda加速等。

```bash
alias setproxy="export ALL_PROXY=socks5://127.0.0.1:1089"
alias unsetproxy="unset ALL_PROXY"
```

# 简化nvidia-smi执行

```bash
alias hsmi='watch -n 1 -d nvidia-smi'
```

# 激活conda

如果系统中还使用了ROS，最好不要选择conda的自动init，而是自己在使用conda时激活conda。

```bash
alias setconda='. ~/miniconda3/bin/activate'
```

